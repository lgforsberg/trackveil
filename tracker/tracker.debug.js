!function(){"use strict";const e="https://api.trackveil.net/track",t="tv_fp";function n(e,t){console&&console.log&&console.log("[Trackveil] "+e,t||"")}function o(){const e=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,screen.colorDepth,(new Date).getTimezoneOffset(),!!window.sessionStorage,!!window.localStorage,navigator.platform,navigator.hardwareConcurrency||"unknown",navigator.deviceMemory||"unknown"];try{const t=document.createElement("canvas"),n=t.getContext("2d");n&&(n.textBaseline="top",n.font="14px Arial",n.fillText("Trackveil",2,2),e.push(t.toDataURL()))}catch(e){}const t=e.join("|");let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return"fp_"+Math.abs(n).toString(36)+"_"+Date.now().toString(36)}function i(){try{let e=localStorage.getItem(t);return e||(e=o(),localStorage.setItem(t,e)),e}catch(e){return o()}}function r(){if(!window.performance||!window.performance.timing)return null;const e=window.performance.timing,t=e.loadEventEnd-e.navigationStart;return 0===e.loadEventEnd||t<0||t>6e4?null:t}!function(){const t=function(){const e=document.currentScript||document.querySelector("script[data-site-id]");if(!e)return n("Script tag not found - tracking disabled"),null;const t=e.getAttribute("data-site-id");return t||(n("data-site-id attribute is required - tracking disabled"),null)}();function o(){const o=function(e){return{site_id:e,page_url:window.location.href,page_title:document.title,referrer:document.referrer,screen_width:screen.width,screen_height:screen.height,fingerprint:i(),load_time:r()}}(t);!function(t){if(navigator.sendBeacon)try{const n=new Blob([JSON.stringify(t)],{type:"application/json"});if(navigator.sendBeacon(e,n))return}catch(e){}try{n("Trying image pixel method...");var o=new Image(1,1),i=[];for(var r in t)t.hasOwnProperty(r)&&null!=t[r]&&i.push(encodeURIComponent(r)+"="+encodeURIComponent(String(t[r])));return o.src=e+"?"+i.join("&"),o.onload=function(){n("Image pixel succeeded"),o=null},o.onerror=function(){n("Image pixel request sent (error handler - this is normal)"),o=null},void n("Image pixel request initiated")}catch(e){n("Image pixel exception:",e)}try{fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0,credentials:"omit",cache:"no-store",mode:"cors"}).catch(function(e){n("All tracking methods failed",e)})}catch(e){n("Tracking completely failed",e)}}(o)}t&&("complete"===document.readyState?setTimeout(o,100):window.addEventListener("load",function(){setTimeout(o,100)}),document.addEventListener("visibilitychange",function(){document.visibilityState}))}()}();